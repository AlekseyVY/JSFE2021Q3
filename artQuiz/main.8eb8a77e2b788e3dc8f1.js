(()=>{"use strict";var t,e,s={},a={};function n(t){var e=a[t];if(void 0!==e)return e.exports;var r=a[t]={id:t,exports:{}};return s[t](r,r.exports,n),r.exports}n.m=s,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,s)=>(n.f[s](t,e),e)),[])),n.u=t=>t+".chunk.js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="alekseyvy-jsfe2021q3:",n.l=(s,a,r,i)=>{if(t[s])t[s].push(a);else{var o,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==e+r){o=d;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",e+r),o.src=s),t[s]=[a];var h=(e,a)=>{o.onerror=o.onload=null,clearTimeout(m);var n=t[s];if(delete t[s],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((t=>t(a))),e)return e(a)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),c&&document.head.appendChild(o)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{n.b=document.baseURI||self.location.href;var t={179:0};n.f.j=(e,s)=>{var a=n.o(t,e)?t[e]:void 0;if(0!==a)if(a)s.push(a[2]);else{var r=new Promise(((s,n)=>a=t[e]=[s,n]));s.push(a[2]=r);var i=n.p+n.u(e),o=new Error;n.l(i,(s=>{if(n.o(t,e)&&(0!==(a=t[e])&&(t[e]=void 0),a)){var r=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,a[1](o)}}),"chunk-"+e,e)}};var e=(e,s)=>{var a,r,[i,o,c]=s,l=0;if(i.some((e=>0!==t[e]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)c(n)}for(e&&e(s);l<i.length;l++)r=i[l],n.o(t,r)&&t[r]&&t[r][0](),t[i[l]]=0},s=self.webpackChunkalekseyvy_jsfe2021q3=self.webpackChunkalekseyvy_jsfe2021q3||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();const r=class{constructor(t){this.state=t,this.subsArray=[],this.init()}getState(){return this.state}init(){this.subsArray.forEach((t=>{t(this.state)}))}subscribe(t){this.subsArray.push(t)}notify(){this.init()}dispatch(t){this.state[t.name]=t.value,this.notify(),console.log(this.state)}};const i=new class extends r{constructor(t){super(t),this.state=t}}({route:"welcome",category:null,questions:null,artistsObj:null,picturesObj:null,questNum:0,data:null}),o=i;const c=class{constructor(t){this.html=t.html,this.state=null,this.class=t.class,this.selector=document.querySelector(t.selector),this.tag=t.tag,this.elem=document.createElement(this.tag),this.root=null,this.listenersArray=t.listeners}render(){this.elem.innerHTML=this.html,this.class&&this.elem.classList.add(this.class),this.selector.append(this.elem),this.listenersArray&&this.listeners()}listen(t){this.state=t,this.render()}destroy(t){this.root=document.querySelector(t),this.root.innerHTML=""}listeners(){this.listenersArray.forEach((t=>{document.querySelector(`#${t.id}`).addEventListener(t.type,(()=>{t.state.dispatch(t.dispatch)}))}))}};const l=new class extends c{constructor(t){super(t),this.dto=t}}({selector:"#root",tag:"main",class:"welcome",html:"\n  <img id='settings-route-btn' class='settings_icon' src='./assets/settings.png' alt='settings'>\n  <img class='logo' src='./assets/logo.svg' alt='Game logo'>\n  <div class='category_welcome-wrapper'>\n  <div id='category-pictures' class='category_welcome'>Pictures</div>\n  <div id='category-artists' class='category_welcome'>Artists</div>\n  </div>\n  <div class='footer'>\n  <a href='https://rs.school/' target=\"_blank\">\n  <img class='rs_logo' src='./assets/rs_logo.png' alt='RSS logo'>\n  </a>\n  <a class='my_logo' href='https://github.com/AlekseyVY' target=\"_blank\">AlekseyVY</a>\n  </div>\n  ",listeners:[{id:"settings-route-btn",type:"click",dispatch:{name:"route",value:"settings"},state:o},{id:"category-pictures",type:"click",dispatch:{name:"route",value:"category"},state:o},{id:"category-artists",type:"click",dispatch:{name:"route",value:"category"},state:o},{id:"category-pictures",type:"click",dispatch:{name:"category",value:"pictures"},state:o},{id:"category-artists",type:"click",dispatch:{name:"category",value:"artists"},state:o}]}),u=l;const d=localStorage.getItem("artQuizSettings");let h={sound:!1,volume:100,timeGame:!1,time:5};d&&(h=JSON.parse(d));const m=new class extends r{constructor(t){super(t),this.state=t}}(h);window.onbeforeunload=()=>{localStorage.setItem("artQuizSettings",JSON.stringify(m.getState()))};const g=m;const p=new class extends c{constructor(t){super(t),this.dto=t,this.timeTextNode=null,this.timeSlider=null,this.time=null,this.state=g.state,this.volume=null,this.listenersArr=[{name:"#sound",type:"change",func:t=>{this.state.sound=t.target.checked}},{name:"#time",type:"change",func:t=>{this.state.timeGame=t.target.checked}},{name:".volume_slider",type:"input",func:t=>{this.state.volume=t.target.value}},{name:".time_slider",type:"input",func:t=>{this.state.time=t.target.value,this.timeTextNode.innerHTML=this.state.time}}]}render(){super.render(),this.setTime(),this.setSound(),this.setListeners()}setSound(){this.sound=document.querySelector("#sound"),this.sound.checked=this.state.sound,this.volume=document.querySelector(".volume_slider"),this.volume.value=this.state.volume}setTime(){this.timeTextNode=document.querySelector(".time_slider-value"),this.timeTextNode.innerHTML=this.state.time,this.timeSlider=document.querySelector(".time_slider"),this.timeSlider.value=this.state.time,this.time=document.querySelector("#time"),this.time.checked=this.state.timeGame}setListeners(){this.listenersArr.forEach((t=>{document.querySelector(t.name).addEventListener(t.type,t.func)}))}}({selector:"#root",tag:"main",class:"container",html:"\n  <div class='header'>\n  <div id='inner_header' class='inner_header'>\n  <img class='arrow_left' src='./assets/arrow_left.png'>\n  <p class='inner_header-text'>\n  settings\n  </p>\n  </div>\n  </div>\n  <div class='sound_block'>\n  <div class='hover'>\n    <input class='check' type=\"checkbox\" id=\"sound\" name=\"sound\">\n    <label for=\"sound\">Sounds</label>\n  </div>\n  <p>Volume</p>\n  <div class='volume_slide-wrapper'>\n  <img class='sound_icon' src='./assets/mute.png' alt='mute'>\n  <input class='volume_slider' type='range' min='0' max='100' step='1'>\n  <img class='sound_icon' src='./assets/volume_up.png' alt='mute'>\n  </div>\n  </div>\n  <div class='time_block'>\n  <div class='hover'>\n    <input class='check' type=\"checkbox\" id=\"time\" name=\"time\">\n    <label for=\"time\">Time game</label>\n  </div>\n  <p>Time to answer</p>\n  <div class='time_slider-wrapper'>\n  <p class='time_slider-value'>0</p>\n  <input class='time_slider' type='range' min='5' max='30' step='5'>\n  </div>\n  </div>\n  <div id='save_settings' class='category_welcome settings-btn'>Save & Close</div>\n  <div class='footer'>\n  <a href='https://rs.school/' target=\"_blank\">\n  <img class='rs_logo' src='./assets/rs_logo.png' alt='RSS logo'>\n  </a>\n  <a class='my_logo' href='https://github.com/AlekseyVY' target=\"_blank\">AlekseyVY</a>\n  </div>\n  ",listeners:[{id:"save_settings",type:"click",dispatch:{name:"route",value:"welcome"},state:o}]}),v=p;const y=new class extends r{constructor(t){super(t),this.state=t}}((()=>{const t={};let e=0;for(;e<=11;){t[e]={};let s=0;for(t[e].id=e;s<=9;)t[e][s]=!1,s+=1;t[e].total=0,t[e].played=!1,e+=1}return t})()),b=y;const w=new class extends r{constructor(t){super(t),this.state=t}}((()=>{const t={};let e=0;for(;e<=11;){t[e]={};let s=0;for(t[e].id=e;s<=9;)t[e][s]=!1,s+=1;t[e].total=0,t[e].played=!1,e+=1}return t})()),f=w;const q=Array.from({length:12},((t,e)=>e)),_=new class extends c{constructor(t){super(t),this.dto=t,this.categoryName=null,this.categoriesArr=null,this.images=null,this.catState=null,this.scoreArr=null,this.scoreLinkNode=null}render(){super.render(),this.setCategory(),this.images="artists"===this.categoryName?o.state.artistsObj:o.state.picturesObj,this.catState="artists"===this.categoryName?b.state:f.state,this.scoreArr=Array.from(document.getElementsByClassName("score_count")),this.setImages(),console.log(this.catState)}setImages(){this.categoriesArr=Array.from(document.getElementsByClassName("question_category")),this.categoriesArr.forEach(((t,e)=>{const s=this.images[e].data[0].imageNum;this.scoreArr[e].innerHTML=`${this.catState[e].total}/10`,this.catState[e].played?(this.setScoreLink(t),t.style.backgroundImage=`url('./assets/game/img/${s}.webp')`):t.style.backgroundImage=`linear-gradient(black, black), url('./assets/game/img/${s}.webp')`}))}setScoreLink(t){this.scoreLinkNode=document.createElement("img"),this.scoreLinkNode.src="./assets/win.png",this.scoreLinkNode.classList.add("score-icon"),this.scoreLinkNode.alt="score",t.append(this.scoreLinkNode),this.scoreLinkNode.addEventListener("click",(e=>{e.stopPropagation(),o.dispatch({name:"questions",value:`${t.id.split("_")[1]}`}),o.dispatch({name:"route",value:"score"})}))}setCategory(){this.categoryName=o.state.category;document.querySelector("#category_name").innerHTML=this.categoryName}}({selector:"#root",tag:"main",class:"container",html:"\n  <div class='category-header'>\n    <img class='category-logo' src='./assets/inner_logo.png' alt='logo'>\n    <p id='home-route-btn'>Home</p>\n    <p id='category_name'>null</p> \n  </div>\n  <div class='questions-wrapper'>\n    <div id=\"question_0\" class=\"question_category\"><span class='score_count'>null</span>round 1</div>\n    <div id=\"question_1\" class=\"question_category\"><span class='score_count'>null</span>round 2</div>\n    <div id=\"question_2\" class=\"question_category\"><span class='score_count'>null</span>round 3</div>\n    <div id=\"question_3\" class=\"question_category\"><span class='score_count'>null</span>round 4</div>\n    <div id=\"question_4\" class=\"question_category\"><span class='score_count'>null</span>round 5</div>\n    <div id=\"question_5\" class=\"question_category\"><span class='score_count'>null</span>round 6</div>\n    <div id=\"question_6\" class=\"question_category\"><span class='score_count'>null</span>round 7</div>\n    <div id=\"question_7\" class=\"question_category\"><span class='score_count'>null</span>round 8</div>\n    <div id=\"question_8\" class=\"question_category\"><span class='score_count'>null</span>round 9</div>\n    <div id=\"question_9\" class=\"question_category\"><span class='score_count'>null</span>round 10</div>\n    <div id=\"question_10\" class=\"question_category\"><span class='score_count'>null</span>round 11</div>\n    <div id=\"question_11\" class=\"question_category\"><span class='score_count'>null</span>round 12</div>\n  </div>\n  <div class='footer'>\n    <a href='https://rs.school/' target=\"_blank\">\n      <img class='rs_logo' src='./assets/rs_logo.png' alt='RSS logo'>\n    </a>\n    <a class='my_logo' href='https://github.com/AlekseyVY' target=\"_blank\">AlekseyVY</a>\n  </div>\n  ",listeners:[{id:"home-route-btn",type:"click",dispatch:{name:"route",value:"welcome"},state:o},...q.map(((t,e)=>({id:`question_${e}`,type:"click",dispatch:{name:"questions",value:`${e+1}`},state:o}))),...q.map(((t,e)=>({id:`question_${e}`,type:"click",dispatch:{name:"route",value:"game"},state:o})))]}),k=_;const S=new class extends c{constructor(t){super(t),this.dto=t,this.images=null,this.scoreState=null,this.node=null,this.rootNode=document.querySelector("#root"),this.scoreTextNode=null}render(){super.render(),this.images="artists"===o.state.category?o.state.artistsObj[o.state.questions].data:o.state.picturesObj[o.state.questions].data,this.scoreState="artists"===o.state.category?b.state[o.state.questions]:f.state[o.state.questions],this.setScores()}setScores(){this.node=document.querySelector(".score-wrapper"),this.scoreTextNode=document.querySelector("#score-text"),this.scoreTextNode.innerHTML=this.scoreState.total;for(let t=0;t<=9;t+=1){const e=document.createElement("div");e.classList.add("score-card"),this.node.appendChild(e),this.scoreState[t]?e.style.backgroundImage=`url('./assets/game/img/${this.images[t].imageNum}.webp')`:e.style.backgroundImage=`linear-gradient(black, black), url('./assets/game/img/${this.images[t].imageNum}.webp')`,e.addEventListener("click",(()=>{this.setModal(this.images[t]);document.querySelector(".score-btn").addEventListener("click",(()=>{document.querySelector(".modal").remove()}))}))}}setModal(t){const e=document.createElement("div");this.rootNode.appendChild(e),e.classList.add("modal");const s=`\n      <div class='check-img-wrapper'>\n      <img class='modal-answer--img' src='./assets/game/img/${t.imageNum}.webp'>\n      </div>\n      <p class='answer-modal-name'>${t.name}</p>\n      <p class='answer-mpodal-author'>${t.author},<span>${t.year}</span></p>\n      <div id='modal-btn' class='score-btn'>закрыть</div>\n    `;e.innerHTML=s}}({selector:"#root",tag:"main",class:"container",html:"\n  <p class='score-outher-text'>Score is: <span id='score-text'>null</span>/10</p>\n  <div class='score-wrapper'>\n  </div>\n  <div id='home-route-btn' class='score-button'>Назад</div>\n  <div class='footer'>\n  <a href='https://rs.school/' target=\"_blank\">\n  <img class='rs_logo' src='./assets/rs_logo.png' alt='RSS logo'>\n  </a>\n  <a class='my_logo' href='https://github.com/AlekseyVY' target=\"_blank\">AlekseyVY</a>\n  </div>\n  ",listeners:[{id:"home-route-btn",type:"click",dispatch:{name:"route",value:"category"},state:o}]}),A=S,N=(t,e,s)=>Array.from({length:e},((t,e)=>e)).map(((e,a)=>{let n=0;const r=[];for(;n<s;)n+=1,r.push(t.shift());return{id:a,status:!1,data:r,result:0}}));const L=class{constructor(){this.worker=new Worker(new URL(n.p+n.u(11),n.b)),this.worker.postMessage(!0),this.data=null,this.worker.onmessage=t=>{o.dispatch({name:"data",value:t.data}),this.data=t.data;o.dispatch({name:"artistsObj",value:N(this.data.slice(0,Math.floor(this.data.length/2)),12,10)}),o.dispatch({name:"picturesObj",value:N(this.data.slice(Math.floor(this.data.length/2)+1),12,10)})}}terminate(){this.worker.terminate()}};const T=new class{constructor(t){this.dto=t,this.game="./assets/sounds/game.mp3",this.win="./assets/sounds/won.mp3",this.lose="./assets/sounds/lose.mp3",this.data=null}gameSound(){this.playSound(this.game)}winSound(){this.playSound(this.win)}loseSound(){this.playSound(this.lose)}playSound(t){this.data=t;const e=new Audio(this.data);e.volume=Number(g.state.volume)/100,e.play()}}({}),E=T;const x=new L,M=new class extends c{constructor(t){super(t),this.dto=t,this.data=t.data,this.category=null,this.pageData=null,this.state=null,this.buttons=null,this.answers=[],this.questArr=null,this.rootNode=document.querySelector("#root"),this.settings=null,this.gameTimer=null,this.log=null}render(){super.render(),this.setGameData(),this.setAnswer(),this.setTimeGame(),this.answers=[]}setTimeGame(){if(this.settings=g.state,this.settings.timeGame){const t=document.querySelector(".game-header"),e=document.createElement("progress");e.max=this.settings.time,e.classList.add("time-game-indicator"),e.value=0,e.id="progressBar";const s=document.createElement("p");s.innerHTML=this.settings.time,s.classList.add("timer-game"),t.appendChild(e),t.appendChild(s);let a=this.settings.time;this.gameTimer=setInterval((()=>{a<=0&&(clearInterval(this.gameTimer),setTimeout((()=>{try{this.calcAnswers(!1,o.state.questNum),this.getModal(!1)}catch(t){this.log=t}}),0)),document.getElementById("progressBar")&&(document.getElementById("progressBar").value=this.settings.time-a),s.innerHTML=a,a-=1}),1e3)}}setGameData(){this.category=this.getCategory(),this.pageData=this.category.data[o.state.questNum],this.questArr||"artists"!==o.state.category?this.questArr||"pictures"!==o.state.category||(this.questArr=f.state[this.category.id],this.questArr.total=0):(this.questArr=b.state[this.category.id],this.questArr.total=0),this.questArr&&(this.questArr.played=!0)}getCategory(){return this.state=o.state,"pictures"===this.state.category?this.state.picturesObj[this.state.questions-1]:this.state.artistsObj[this.state.questions-1]}setAnswer(){"artists"===o.state.category?this.setAuthorAnswer():this.setPicAnswer(),this.answers=this.shuffleAnswers(),this.buttons.forEach(((t,e)=>{t.textContent=this.answers[e].answer,this.answers[e].right?this.answerResolve(t,!0):this.answerResolve(t,!1)})),this.setExit()}setPicAnswer(){document.querySelector(".question-game").innerHTML="Как называется данная картина";document.querySelector(".main-image").src=`./assets/game/img/${this.pageData.imageNum}.webp`,this.buttons=Array.from(document.getElementsByClassName("answer-btn"));let t=3;const e=this.pageData.name;for(this.answers.push({right:!0,answer:e});0!==t;){const s=this.state.data[Math.floor(Math.random()*this.state.data.length)].name;s!==e&&(t-=1,this.answers.push({right:!1,answer:s}))}}getModal(t){clearInterval(this.gameTimer);const e=document.createElement("div");this.rootNode.appendChild(e);document.querySelector(".container").remove(),e.classList.add("modal");const s=`\n    <div class='check-img-wrapper'>\n    <img class='modal-answer--img' src='./assets/game/img/${this.pageData.imageNum}.webp'>\n      <img class='check-img' src='./assets/${t?"true":"false"}.png' alt='check'>\n    </div>\n    <p class='answer-modal-name'>${this.pageData.name}</p>\n    <p class='answer-mpodal-author'>${this.pageData.author},<span>${this.pageData.year}</span></p>\n    <div id='modal-btn'>Далее</div>\n    `;e.innerHTML=s;document.querySelector("#modal-btn").addEventListener("click",(()=>{9===o.state.questNum?(o.dispatch({name:"questNum",value:0}),"artists"===o.state.category?b.dispatch({name:Number(o.state.questions)-1,value:this.questArr}):f.dispatch({name:Number(o.state.questions)-1,value:this.questArr}),this.questArr=null,o.dispatch({name:"route",value:"results"})):o.dispatch({name:"questNum",value:o.state.questNum<9?o.state.questNum+=1:o.state.questNum})}))}setAuthorAnswer(){document.querySelector(".main-image").src=`./assets/game/img/${this.pageData.imageNum}.webp`,this.buttons=Array.from(document.getElementsByClassName("answer-btn"));let t=3;const e=this.pageData.author;for(this.answers.push({right:!0,answer:e});0!==t;){const s=this.state.data[Math.floor(Math.random()*this.state.data.length)].author;s!==e&&(t-=1,this.answers.push({right:!1,answer:s}))}}setExit(){clearInterval(this.gameTimer);document.querySelector("#home-route-btn").addEventListener("click",(()=>{o.dispatch({name:"questNum",value:0}),this.questArr=null}))}answerResolve(t,e){t.addEventListener("click",(()=>{this.calcAnswers(e,o.state.questNum),this.getModal(e)}))}calcAnswers(t,e){g.state.sound&&t&&E.winSound(),g.state.sound&&!t&&E.loseSound(),this.questArr[e]=t,t&&(this.questArr.total+=1)}shuffleAnswers(){const t=this.answers.slice();for(let e=t.length-1;e>0;e-=1){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}}({worker:x,selector:"#root",tag:"main",data:o.data,class:"container",html:"\n  <div class='game-header'>\n  <img id='home-route-btn' class='close-game' src='./assets/close.png' alt='close button'>\n  </div>\n  <div class='question-game'>Кто автор этой картины?</div>\n  <img class='main-image' src=''>\n  <div class='answers-wrapper'>\n    <div class='answer-btn'>1</div>\n    <div class='answer-btn'>2</div>\n    <div class='answer-btn'>3</div>\n    <div class='answer-btn'>4</div>\n  </div>\n  ",listeners:[{id:"home-route-btn",type:"click",dispatch:{name:"route",value:"category"},state:o}]}),$=M;const j=class{constructor(t){this.routes=t.routes,this.root=document.querySelector("#root")}render(t){this.routes[t].destroy("#root"),window.location.hash=t,this.routes[t].render()}listen(t){this.render(t.route)}};const C=new class extends c{constructor(t){super(t),this.dto=t,this.data=null}render(){super.render(),g.state.sound&&E.gameSound(),"artists"===o.state.category?this.data=b.state[Number(o.state.questions)-1]:this.data=f.state[Number(o.state.questions)-1];document.querySelector("#score").innerHTML=this.data.total}}({selector:"#root",tag:"main",class:"container",html:"\n  <div class='results-wrapper'>\n  <img class='win-img' src='./assets/win.png' alt='win'>\n  <p class='congrats-text'>Congratulations!</p>\n  <p><span id='score'>0</span>/10</p>\n  <div class='button-wrapper'>\n  <div id='home-route' class='score-btn'>Home</div>\n  <div id='cat-route' class='score-btn'>Next Quiz</div>\n  </div>\n  </div>\n  ",listeners:[{id:"home-route",type:"click",dispatch:{name:"route",value:"welcome"},state:o},{id:"cat-route",type:"click",dispatch:{name:"route",value:"category"},state:o}]}),O=new j({routes:{welcome:u,settings:v,category:k,score:A,game:$,results:C}});o.subscribe((t=>O.listen(t)));const H=O;n.e(927).then(n.bind(n,927)),n.e(232).then(n.bind(n,232)),H.render("welcome")})();